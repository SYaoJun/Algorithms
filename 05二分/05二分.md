## 二分

-   时间复杂度
    -   $O(logN)$
-   适用范围
    -   求最大最小值

## 模板

-   模板1：右模板
    -   适用于$x >= target$

```cpp
int bsearch_1(int l, int r){
    while (l < r) {
        int mid = l + r >> 1;
        if (check(mid)) r = mid;
        else l = mid + 1;
    }
    return l;
}
```

-   模板2：左模板
    -   适用于$x <= target$

```cpp
int bsearch_2(int l, int r){
    while (l < r){
        int mid = l + r + 1 >> 1;
        if (check(mid)) l = mid;
        else r = mid - 1;
    }
    return l;
}
```



## 经典例题

#### [LCP 18. 早餐组合](https://leetcode-cn.com/problems/2vYnGI/) 简单

-   注意`l==0`的边界判断
-   枚举一个数组，二分搜索另外一个数组。

```cpp
class Solution {
public:
    int breakfastNumber(vector<int>& a, vector<int>& b, int x) {
        sort(a.begin(), a.end());
        sort(b.begin(), b.end());
        int res = 0;
        const int mod = 1e9+7;
        for(auto &u: a){
            int t = x - u;
            int l = 0, r = b.size() - 1;
            while(l < r){
                int mid = l + r + 1 >> 1;
                if(b[mid] <= t) l = mid;
                else r = mid - 1;
            }
            if(b[l] <= t)
                res = (res + l + 1ll) % mod;
        }
        return res;
    }
};
```



#### [153. 寻找旋转排序数组中的最小值](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/) 中等 yxc 二分 必须以末尾作为判定标准 

#### [154. 寻找旋转排序数组中的最小值 II](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/) 困难 二分 首尾去重 同样末尾作为判定标准

#### [744. 寻找比目标字母大的最小字母](https://leetcode-cn.com/problems/find-smallest-letter-greater-than-target/) 简单 [hhj](https://www.bilibili.com/video/av31808790) 二分模板

#### [754. 到达终点数字](https://leetcode-cn.com/problems/reach-a-number/) 中等 数学规律 [hhj](https://www.bilibili.com/video/av31621072) 

#### [33. 搜索旋转排序数组](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/) 中等 二分 [yxc](https://www.bilibili.com/video/av59202632)  2020.4.27

#### [81. 搜索旋转排序数组 II](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/) 中等 二分 yj 先去除首尾重复元素

#### [278. 第一个错误的版本](https://leetcode-cn.com/problems/first-bad-version/) 简单 [yxc](https://www.bilibili.com/video/av59202632) 二分 注意可能会溢出需要转成long long

#### [162. 寻找峰值](https://leetcode-cn.com/problems/find-peak-element/) 中等 [yxc](https://www.bilibili.com/video/av59202632) 二分 有点特殊

#### [287. 寻找重复数](https://leetcode-cn.com/problems/find-the-duplicate-number/) 中等 [yxc](https://www.bilibili.com/video/av59202632) 剑指offer 二分 

#### [275. H指数 II](https://leetcode-cn.com/problems/h-index-ii/) 中等 [yxc](https://www.bilibili.com/video/av59202632) 二分

#### [367. 有效的完全平方数](https://leetcode-cn.com/problems/valid-perfect-square/) 简单 二分 yj

#### [374. 猜数字大小](https://leetcode-cn.com/problems/guess-number-higher-or-lower/) 简单 精确二分 yj

#### [875. 爱吃香蕉的珂珂](https://leetcode-cn.com/problems/koko-eating-bananas/) 中等 模板一

-   上取整技巧$\lceil \frac{b}{a} \rceil$ 等价于$\lfloor \frac{b+a-1}{a} \rfloor$

```cpp
class Solution {
public:
    int minEatingSpeed(vector<int>& piles, int h) {
        int l = 1, r = 0;
        for(auto p: piles) r = max(r, p);
        while(l < r){
            int mid = l + r >> 1;
            if(check(mid, piles, h)) r = mid;
            else l = mid + 1;
        }
        return l;
    }
    bool check(int x, vector<int>&piles, int h){
        int sum = 0;
        for(auto p: piles){
            sum += (p+x-1)/x;
        }
        return sum <= h;
    }
};
```

#### [704. 二分查找](https://leetcode-cn.com/problems/binary-search/) 简单

-   二分的模板题
-   使用右模板，最后输出结果的时候，判断二分终止的位置是否是目标值。如果是，则输出对应的下标；如果不是输出-1。

```c++
class Solution {
public:
    int search(vector<int>& nums, int target) {
        int l = 0, r = nums.size() - 1;
        while(l < r){
            int mid = l + r >> 1;
            if(nums[mid] >= target) r = mid;
            else l = mid + 1;
        }
        return nums[l]==target?l:-1;
    }
};
```

#### 二分搜索由浅入深 2021.9.6 刻意练习

- [704. 二分查找](https://leetcode-cn.com/problems/binary-search/) 简单
- [69. x 的平方根](https://leetcode-cn.com/problems/sqrtx/) 简单
- [34. 在排序数组中查找元素的第一个和最后一个位置](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/) 中等
- [875. 爱吃香蕉的珂珂](https://leetcode-cn.com/problems/koko-eating-bananas/) 中等
- [1011. 在 D 天内送达包裹的能力](https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/) 中等
- [1283. 使结果不超过阈值的最小除数](https://leetcode-cn.com/problems/find-the-smallest-divisor-given-a-threshold/) 中等
- [1482. 制作 m 束花所需的最少天数](https://leetcode-cn.com/problems/minimum-number-of-days-to-make-m-bouquets/) 中等
- [475. 供暖器](https://leetcode-cn.com/problems/heaters/) 中等